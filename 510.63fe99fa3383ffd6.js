"use strict";(self.webpackChunkangular_base=self.webpackChunkangular_base||[]).push([[510],{9510:(me,N,l)=>{l.r(N),l.d(N,{CustomModule:()=>ue});var f=l(6895),_=l(5263),d=l(2188),u=l.n(d),m=l(9336),i=l(433),e=l(4650),C=l(7131),g=l(3679),y=l(6616),w=l(7044),x=l(1664),c=l(7200),A=l(4606),v=l(5635),z=l(1102);function M(s,n){if(1&s&&(e.TgZ(0,"nz-form-label",15),e._uU(1," \u5ba1\u6279\u4eba "),e.qZA()),2&s){const o=e.oxw().$implicit;e.Q6J("nzFor",o.controlInstance)}}function E(s,n){if(1&s){const o=e.EpF();e.TgZ(0,"nz-form-item"),e.YNc(1,M,2,1,"nz-form-label",11),e.TgZ(2,"nz-form-control",12),e._UZ(3,"input",13),e.TgZ(4,"span",14),e.NdJ("click",function(r){const p=e.CHM(o).$implicit,h=e.oxw();return e.KtG(h.removeField(p,r))}),e.qZA()()()}if(2&s){const o=n.$implicit,t=n.index;e.xp6(1),e.Q6J("ngIf",0===t),e.xp6(1),e.Q6J("nzOffset",0===t?0:5),e.xp6(1),e.Q6J("formControlName",o.controlInstance),e.uIk("id",o.id)}}const T=function(){return{span:24,offset:0}},F=function(){return{span:20,offset:4}};let O=(()=>{class s{constructor(o,t){this.drawerRef=o,this.fb=t,this.listOfControl=[]}ngOnInit(){if(this.validateForm=this.fb.group({}),null!=this.node.data.properties.approve_user_id_list&&(this.approve_user=this.node.data.properties.approve_user_id_list,this.approve_type=this.node.data.properties.approve_type),void 0!==this.approve_user&&""!=this.approve_user){let o=this.approve_user.split(",");for(let t=0;t<o.length;t++)this.addField(void 0,o[t])}else this.addField(void 0,"")}save(){console.log("submit",this.validateForm.getRawValue());let o=[];for(let t=0;t<100;t++){const r=this.validateForm.getRawValue()["approve_"+t];if(null==r)break;o.push(r)}this.drawerRef.close({approve_user_id_list:o.join(","),approve_type:this.approve_type})}removeField(o,t){if(t.preventDefault(),this.listOfControl.length>1){const r=this.listOfControl.indexOf(o);this.listOfControl.splice(r,1),console.log(this.listOfControl),this.validateForm.removeControl(o.controlInstance)}}addField(o,t){o&&o.preventDefault();const r=this.listOfControl.length>0?this.listOfControl[this.listOfControl.length-1].id+1:0,p=this.listOfControl.push({id:r,controlInstance:`approve_${r}`});console.log(this.listOfControl[this.listOfControl.length-1]),this.validateForm.addControl(this.listOfControl[p-1].controlInstance,new i.p4(t,i.kI.required))}}return s.\u0275fac=function(o){return new(o||s)(e.Y36(C.lB),e.Y36(i.QS))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-approve-edit"]],inputs:{node:"node"},decls:22,vars:7,consts:[["nz-row",""],["nz-col","","nzSpan","24"],[3,"ngModel","ngModelChange"],["nzValue","1","nzLabel","\u4f1a\u7b7e"],["nzValue","2","nzLabel","\u6216\u7b7e"],["nz-form","",3,"formGroup"],[4,"ngFor","ngForOf"],[3,"nzXs","nzSm"],["nz-button","","nzType","dashed",1,"add-button",3,"click"],["nz-icon","","nzType","plus"],["nz-button","","nzType","primary",3,"click"],["nzSpan","5",3,"nzFor",4,"ngIf"],["nzSpan","19","nzErrorTip","Please input passenger's name or delete this field.",3,"nzOffset"],["nz-input","","placeholder","\u8bf7\u8f93\u5165\u5de5\u53f7","width","90%",1,"passenger-input",3,"formControlName"],["nz-icon","","nzType","minus-circle-o",1,"dynamic-delete-button",3,"click"],["nzSpan","5",3,"nzFor"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"nz-form-label"),e._uU(3,"\u5ba1\u6279\u7c7b\u578b"),e.qZA(),e.TgZ(4,"nz-select",2),e.NdJ("ngModelChange",function(a){return t.approve_type=a}),e._UZ(5,"nz-option",3)(6,"nz-option",4),e.qZA()()(),e._UZ(7,"br"),e.TgZ(8,"div",0)(9,"form",5),e.YNc(10,E,5,4,"nz-form-item",6),e.TgZ(11,"nz-form-item")(12,"nz-form-control",7)(13,"button",8),e.NdJ("click",function(a){return t.addField(a,"")}),e._UZ(14,"span",9),e._uU(15," \u6dfb\u52a0\u65b0\u7684\u5ba1\u6279\u4eba "),e.qZA()()()()(),e._UZ(16,"br")(17,"br"),e.TgZ(18,"div",0)(19,"div",1)(20,"button",10),e.NdJ("click",function(){return t.save()}),e._uU(21,"\u786e\u5b9a"),e.qZA()()()),2&o&&(e.xp6(4),e.Q6J("ngModel",t.approve_type),e.xp6(5),e.Q6J("formGroup",t.validateForm),e.xp6(1),e.Q6J("ngForOf",t.listOfControl),e.xp6(2),e.Q6J("nzXs",e.DdM(5,T))("nzSm",e.DdM(6,F)))},dependencies:[g.t3,g.SK,y.ix,w.w,x.dQ,c.Lr,c.Nx,c.iK,c.Fd,A.Ip,A.Vq,v.Zp,i._Y,i.Fj,i.JJ,i.JL,i.On,z.Ls,f.sg,f.O5,i.sg,i.u],styles:["nz-select[_ngcontent-%COMP%]{width:100%}.dynamic-delete-button[_ngcontent-%COMP%]{cursor:pointer;position:relative;top:4px;font-size:24px;color:#999;transition:all .3s}.dynamic-delete-button[_ngcontent-%COMP%]:hover{color:#777}.passenger-input[_ngcontent-%COMP%]{width:80%;margin-right:8px}[nz-form][_ngcontent-%COMP%]{max-width:100%}.add-button[_ngcontent-%COMP%]{width:60%}"]}),s})();function B(s,n){if(1&s&&(e.TgZ(0,"nz-form-label",15),e._uU(1," \u6284\u9001\u4eba "),e.qZA()),2&s){const o=e.oxw().$implicit;e.Q6J("nzFor",o.controlInstance)}}function U(s,n){if(1&s){const o=e.EpF();e.TgZ(0,"nz-form-item"),e.YNc(1,B,2,1,"nz-form-label",11),e.TgZ(2,"nz-form-control",12),e._UZ(3,"input",13),e.TgZ(4,"span",14),e.NdJ("click",function(r){const p=e.CHM(o).$implicit,h=e.oxw();return e.KtG(h.removeField(p,r))}),e.qZA()()()}if(2&s){const o=n.$implicit,t=n.index;e.xp6(1),e.Q6J("ngIf",0===t),e.xp6(1),e.Q6J("nzOffset",0===t?0:5),e.xp6(1),e.Q6J("formControlName",o.controlInstance),e.uIk("id",o.id)}}const Z=function(){return{span:24,offset:0}},P=function(){return{span:20,offset:4}};let S=(()=>{class s{constructor(o,t){this.drawerRef=o,this.fb=t,this.listOfControl=[]}ngOnInit(){if(this.validateForm=this.fb.group({}),console.log(this.node),null!=this.node.data.properties.copy_user_id_list&&(this.copy_user=this.node.data.properties.copy_user_id_list,this.copy_type=this.node.data.properties.copy_type),void 0!==this.copy_user&&""!=this.copy_user){let o=this.copy_user.split(",");for(let t=0;t<o.length;t++)this.addField(void 0,o[t])}else this.addField(void 0,"")}save(){console.log("submit",this.validateForm.getRawValue());let o=[];for(let t=0;t<100;t++){const r=this.validateForm.getRawValue()["approve_"+t];if(null==r)break;o.push(r)}this.drawerRef.close({copy_user_id_list:o.join(","),copy_type:this.copy_type})}removeField(o,t){if(t.preventDefault(),this.listOfControl.length>1){const r=this.listOfControl.indexOf(o);this.listOfControl.splice(r,1),console.log(this.listOfControl),this.validateForm.removeControl(o.controlInstance)}}addField(o,t){o&&o.preventDefault();const r=this.listOfControl.length>0?this.listOfControl[this.listOfControl.length-1].id+1:0,p=this.listOfControl.push({id:r,controlInstance:`approve_${r}`});console.log(this.listOfControl[this.listOfControl.length-1]),this.validateForm.addControl(this.listOfControl[p-1].controlInstance,new i.p4(t,i.kI.required))}}return s.\u0275fac=function(o){return new(o||s)(e.Y36(C.lB),e.Y36(i.QS))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-copy-edit"]],inputs:{node:"node"},decls:22,vars:7,consts:[["nz-row",""],["nz-col","","nzSpan","24"],[3,"ngModel","ngModelChange"],["nzValue","1","nzLabel","\u90ae\u4ef6\u901a\u77e5"],["nzValue","2","nzLabel","\u5176\u4ed6"],["nz-form","",3,"formGroup"],[4,"ngFor","ngForOf"],[3,"nzXs","nzSm"],["nz-button","","nzType","dashed",1,"add-button",3,"click"],["nz-icon","","nzType","plus"],["nz-button","","nzType","primary",3,"click"],["nzSpan","5",3,"nzFor",4,"ngIf"],["nzSpan","19","nzErrorTip","Please input passenger's name or delete this field.",3,"nzOffset"],["nz-input","","placeholder","\u8bf7\u8f93\u5165\u5de5\u53f7","width","90%",1,"passenger-input",3,"formControlName"],["nz-icon","","nzType","minus-circle-o",1,"dynamic-delete-button",3,"click"],["nzSpan","5",3,"nzFor"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"nz-form-label"),e._uU(3,"\u6284\u9001\u7c7b\u578b"),e.qZA(),e.TgZ(4,"nz-select",2),e.NdJ("ngModelChange",function(a){return t.copy_type=a}),e._UZ(5,"nz-option",3)(6,"nz-option",4),e.qZA()()(),e._UZ(7,"br"),e.TgZ(8,"div",0)(9,"form",5),e.YNc(10,U,5,4,"nz-form-item",6),e.TgZ(11,"nz-form-item")(12,"nz-form-control",7)(13,"button",8),e.NdJ("click",function(a){return t.addField(a,"")}),e._UZ(14,"span",9),e._uU(15," \u6dfb\u52a0\u65b0\u7684\u6284\u9001\u4eba "),e.qZA()()()()(),e._UZ(16,"br")(17,"br"),e.TgZ(18,"div",0)(19,"div",1)(20,"button",10),e.NdJ("click",function(){return t.save()}),e._uU(21,"\u786e\u5b9a"),e.qZA()()()),2&o&&(e.xp6(4),e.Q6J("ngModel",t.copy_type),e.xp6(5),e.Q6J("formGroup",t.validateForm),e.xp6(1),e.Q6J("ngForOf",t.listOfControl),e.xp6(2),e.Q6J("nzXs",e.DdM(5,Z))("nzSm",e.DdM(6,P)))},dependencies:[g.t3,g.SK,y.ix,w.w,x.dQ,c.Lr,c.Nx,c.iK,c.Fd,A.Ip,A.Vq,v.Zp,i._Y,i.Fj,i.JJ,i.JL,i.On,z.Ls,f.sg,f.O5,i.sg,i.u],styles:["nz-select[_ngcontent-%COMP%]{width:100%}.dynamic-delete-button[_ngcontent-%COMP%]{cursor:pointer;position:relative;top:4px;font-size:24px;color:#999;transition:all .3s}.dynamic-delete-button[_ngcontent-%COMP%]:hover{color:#777}.passenger-input[_ngcontent-%COMP%]{width:60%;margin-right:8px}[nz-form][_ngcontent-%COMP%]{max-width:600px}.add-button[_ngcontent-%COMP%]{width:60%}"]}),s})();var R=l(2027),Q=l(1452);const D={type:"CustomRect",view:class J extends d.RectNode{},model:class Y extends d.RectNodeModel{initNodeData(n){super.initNodeData(n)}getNodeStyle(){const n=super.getNodeStyle();return n.stroke="#2987ff",n}}},k={type:"CustomaPolygon",view:class K extends d.PolygonNode{},model:class I extends d.PolygonNodeModel{getNodeStyle(){const n=super.getNodeStyle();return n.stroke="#2987ff",n}}},L={type:"start",view:class G extends d.CircleNode{},model:class V extends d.CircleNodeModel{initNodeData(n){super.initNodeData(n)}getNodeStyle(){const n=super.getNodeStyle();return n.stroke="#2987ff",n}getConnectedTargetRules(){const n=super.getConnectedTargetRules();return n.push({message:"\u8d77\u59cb\u8282\u70b9\u4e0d\u80fd\u4f5c\u4e3a\u8fb9\u7684\u7ec8\u70b9",validate:()=>!1}),n}}},W={type:"end",view:class X extends d.CircleNode{getShape(){const{model:n}=this.props,{x:t,y:r,r:a}=n,{fill:p,stroke:h,strokeWidth:b}=n.getNodeStyle();return(0,d.h)("g",{},[(0,d.h)("circle",{cx:t,cy:r,r:a,fill:p,stroke:h,strokeWidth:b}),(0,d.h)("circle",{cx:t,cy:r,r:a-10,fill:p,stroke:h,strokeWidth:b})])}},model:class H extends d.CircleNodeModel{initNodeData(n){super.initNodeData(n),this.r=50}getNodeStyle(){const n=super.getNodeStyle();return n.stroke="#2987ff",n.fill="transparent",n.strokeWidth=2,n}getConnectedSourceRules(){const n=super.getConnectedSourceRules();return n.push({message:"\u7ec8\u6b62\u8282\u70b9\u4e0d\u80fd\u4f5c\u4e3a\u8fde\u7ebf\u7684\u8d77\u70b9",validate:()=>!1}),n}}},$={type:"CustomHtml",view:class j extends d.HtmlNode{setHtml(n){const{properties:o}=this.props.model,t=document.createElement("custom-element");t.className="lf-html-wrapper",t.message=o.text,n.innerHTML="",n.appendChild(t)}},model:class q extends d.HtmlNodeModel{getNodeStyle(){const n=super.getNodeStyle();return n.stroke="#2987ff",n.fill="transparent",n.strokeWidth=2,n}initNodeData(n){super.initNodeData(n),n.text.editable=!1,this.width=100,this.height=100,this.anchorsOffset=[[50,0],[0,50],[-50,0],[0,-50]]}}};let ee=(()=>{class s{constructor(){this.htmlMessage="",this.htmlTitle="",this.htmlType=""}get message(){return this.htmlMessage}set message(o){this.htmlMessage=o}get htmlTitleMessage(){return this.htmlTitle}set htmlTitleMessage(o){this.htmlTitle=o}get htmlTypeMessage(){return this.htmlType}set htmlTypeMessage(o){this.htmlType=o}ngOnInit(){}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-html"]],inputs:{message:"message",htmlTitleMessage:"htmlTitleMessage",htmlTypeMessage:"htmlTypeMessage"},decls:5,vars:3,consts:[[1,"custom-html",2,"width","95px","height","95px","border","2px solid #2F8AFF","font-size","11px"],[1,"custom-head",2,"text-align","center"],[1,"custom-body",2,"width","90px","word-wrap","break-word"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2),e._uU(4),e.qZA()()),2&o&&(e.xp6(2),e.AsE("",t.htmlTitle," | ",t.htmlType,""),e.xp6(2),e.hij(" ",t.htmlMessage," "))}}),s})();const ne={type:"approve",view:class te extends d.HtmlNode{setHtml(n){const{properties:o}=this.props.model,t=document.createElement("custom-element");t.className="lf-html-wrapper",t.htmlTitleMessage="\u5ba1\u6279\u540d\u5355",t.message=o.approve_user_id_list,t.htmlTypeMessage=1==o.approve_type?"\u4f1a\u7b7e":2==o.approve_type?"\u6216\u7b7e":"\u6682\u5b9a",n.innerHTML="",n.appendChild(t),console.log(t)}},model:class oe extends d.HtmlNodeModel{getNodeStyle(){const n=super.getNodeStyle();return n.stroke="rgb(24, 125, 255)",n}initNodeData(n){super.initNodeData(n),n.text.editable=!1,this.width=100,this.height=100,this.anchorsOffset=[[50,0],[0,50],[-50,0],[0,-50]]}}},ie={type:"copy",view:class se extends d.HtmlNode{setHtml(n){const{properties:o}=this.props.model,t=document.createElement("custom-element");t.className="lf-html-wrapper",t.message=o.copy_user_id_list,t.htmlTypeMessage=1==o.approve_type?"\u90ae\u4ef6\u901a\u77e5":2==o.approve_type?"\u5176\u4ed6":"\u6682\u5b9a",t.htmlTitleMessage="\u6284\u9001\u540d\u5355",n.innerHTML="",n.appendChild(t)}},model:class re extends d.HtmlNodeModel{getNodeStyle(){const n=super.getNodeStyle();return n.stroke="rgb(24, 125, 255)",n}initNodeData(n){super.initNodeData(n),n.text.editable=!1,this.width=100,this.height=100,this.anchorsOffset=[[50,0],[0,50],[-50,0],[0,-50]]}}};let le=(()=>{class s{constructor(o){const t=(0,Q.iD)(ee,{injector:o});customElements.get("custom-element")||window.customElements.define("custom-element",t)}ngOnInit(){let o=this.lf;o&&o.on("selection:selected",()=>{o.updateEditConfig({stopMoveGraph:!1})}),this.registerNode()}registerNode(){let t=this.lf;t.register(D),t.register(k),t.register(L),t.register(W),t.register($),t.register(ne),t.register(ie),t.on("connection:not-allowed",r=>{alert(r.msg)}),t.on("custom:button-click",r=>{console.log("custom:button-click"),t.setProperties(r.id,{body:"LogicFlow"})})}openSelection(){this.lf.updateEditConfig({stopMoveGraph:!0})}addStartNode(){this.lf.dnd.startDrag({type:"start",text:"\u5f00\u59cb"})}addGeneralNode(){this.lf.dnd.startDrag({type:"CustomRect",text:"\u666e\u901a\u8282\u70b9",properties:{CustomRect:"\u77e9\u5f62"}})}addApproveNode(){this.lf.dnd.startDrag({type:"approve",text:"",properties:{approve_type:"\u6682\u5b9a"}})}addCopyNode(){this.lf.dnd.startDrag({type:"copy",text:"",properties:{copy_type:"\u6682\u5b9a"}})}addConditionNode(){this.lf.dnd.startDrag({type:"CustomaPolygon",text:"\u6761\u4ef6\u8282\u70b9"})}addHtmlNode(){this.lf.dnd.startDrag({type:"CustomHtml",text:"\u81ea\u5b9a\u4e49Html\u8282\u70b9",properties:{text:"\u70b9\u51fb\u4fee\u6539\u6807\u9898"}})}addEndNode(){this.lf.dnd.startDrag({type:"end",text:"\u7ed3\u675f\u8282\u70b9"})}}return s.\u0275fac=function(o){return new(o||s)(e.Y36(e.zs3))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-custom-node-panel"]],inputs:{lf:"lf"},decls:21,vars:0,consts:[[1,"node-panel"],[1,"node-item",3,"mousedown"],[1,"node-item-icon","selection"],[1,"node-label"],[1,"node-item-icon","start"],[1,"node-item-icon","general"],[1,"node-item-icon","end"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1),e.NdJ("mousedown",function(){return t.openSelection()}),e._UZ(2,"div",2),e.TgZ(3,"span",3),e._uU(4,"\u9009\u533a"),e.qZA()(),e.TgZ(5,"div",1),e.NdJ("mousedown",function(){return t.addStartNode()}),e._UZ(6,"div",4),e.TgZ(7,"span",3),e._uU(8,"\u5f00\u59cb\u8282\u70b9"),e.qZA()(),e.TgZ(9,"div",1),e.NdJ("mousedown",function(){return t.addApproveNode()}),e._UZ(10,"div",5),e.TgZ(11,"span",3),e._uU(12,"\u5ba1\u6279\u8282\u70b9"),e.qZA()(),e.TgZ(13,"div",1),e.NdJ("mousedown",function(){return t.addCopyNode()}),e._UZ(14,"div",5),e.TgZ(15,"span",3),e._uU(16,"\u6284\u9001\u8282\u70b9"),e.qZA()(),e.TgZ(17,"div",1),e.NdJ("mousedown",function(){return t.addEndNode()}),e._UZ(18,"div",6),e.TgZ(19,"span",3),e._uU(20,"\u7ed3\u675f\u8282\u70b9"),e.qZA()()())},styles:[".node-panel[_ngcontent-%COMP%]{position:absolute;top:100px;left:10px;width:70px;padding:10px;background-color:#fff;box-shadow:0 0 10px 1px #e4e0db;border-radius:6px;text-align:center;z-index:101}.node-item[_ngcontent-%COMP%]{margin-bottom:10px}.node-item-icon[_ngcontent-%COMP%]{width:30px;height:30px;margin-left:10px;background-size:cover}.node-label[_ngcontent-%COMP%]{font-size:12px;margin-top:5px;-webkit-user-select:none;user-select:none}.selection[_ngcontent-%COMP%]{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAAOVJREFUOBGtVMENwzAIjKP++2026ETdpv10iy7WFbqFyyW6GBywLCv5gI+Dw2Bluj1znuSjhb99Gkn6QILDY2imo60p8nsnc9bEo3+QJ+AKHfMdZHnl78wyTnyHZD53Zzx73MRSgYvnqgCUHj6gwdck7Zsp1VOrz0Uz8NbKunzAW+Gu4fYW28bUYutYlzSa7B84Fh7d1kjLwhcSdYAYrdkMQVpsBr5XgDGuXwQfQr0y9zwLda+DUYXLaGKdd2ZTtvbolaO87pdo24hP7ov16N0zArH1ur3iwJpXxm+v7oAJNR4JEP8DoAuSFEkYH7cAAAAASUVORK5CYII=) center center no-repeat;cursor:grab}.start[_ngcontent-%COMP%]{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAAnBJREFUOBGdVL1rU1EcPfdGBddmaZLiEhdx1MHZQXApraCzQ7GKLgoRBxMfcRELuihWKcXFRcEWF8HBf0DdDCKYRZpnl7p0svLe9Zzbd29eQhTbC8nv+9zf130AT63jvooOGS8Vf9Nt5zxba7sXQwODfkWpkbjTQfCGUd9gIp3uuPP8bZ946g56dYQvnBg+b1HB8VIQmMFrazKcKSvFW2dQTxJnJdQ77urmXWOMBCmXM2Rke4S7UAW+/8ywwFoewmBps2tu7mbTdp8VMOkIRAkKfrVawalJTtIliclFbaOBqa0M2xImHeVIfd/nKAfVq/LGnPss5Kh00VEdSzfwnBXPUpmykNss4lUI9C1ga+8PNrBD5YeqRY2Zz8PhjooIbfJXjowvQJBqkmEkVnktWhwu2SM7SMx7Cj0N9IC0oQXRo8xwAGzQms+xrB/nNSUWVveI48ayrFGyC2+E2C+aWrZHXvOuz+CiV6iycWe1Rd1Q6+QUG07nb5SbPrL4426d+9E1axKjY3AoRrlEeSQo2Eu0T6BWAAr6COhTcWjRaYfKG5csnvytvUr/WY4rrPMB53Uo7jZRjXaG6/CFfNMaXEu75nG47X+oepU7PKJvvzGDY1YLSKHJrK7vFUwXKkaxwhCW3u+sDFMVrIju54RYYbFKpALZAo7sB6wcKyyrd+aBMryMT2gPyD6GsQoRFkGHr14TthZni9ck0z+Pnmee460mHXbRAypKNy3nuMdrWgVKj8YVV8E7PSzp1BZ9SJnJAsXdryw/h5ctboUVi4AFiCd+lQaYMw5z3LGTBKjLQOeUF35k89f58Vv/tGh+l+PE/wG0rgfIUbZK5AAAAABJRU5ErkJggg==) center center no-repeat;cursor:grab}.end[_ngcontent-%COMP%]{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAA1BJREFUOBFtVE1IVUEYPXOf+tq40Y3vPcmFIdSjIorWoRG0ERWUgnb5FwVhYQSl72oUoZAboxKNFtWiwKRN0M+jpfSzqJAQclHo001tKkjl3emc8V69igP3znzfnO/M9zcDcKT67azmjYWTwl9Vn7Vumeqzj1DVb6cleQY4oAVnIOPb+mKAGxQmKI5CWNJ2aLPatxWa3aB9K7/fB+/Z0jUF6TmMlFLQqrkECWQzOZxYGjTlOl8eeKaIY5yHnFn486xBustDjWT6dG7pmjHOJd+33t0iitTPkK6tEvjxq4h2MozQ6WFSX/LkDUGfFwfhEZj1Auz/U4pyAi5Sznd7uKzznXeVHlI/Aywmk6j7fsUsEuCGADrWARXXwjxWQsUbIupDHJI7kF5dRktg0eN81IbiZXiTESic50iwS+t1oJgL83jAiBupLDCQqwziaWSoAFSeIR3P5Xv5az00wyIn35QRYTwdSYbz8pH8fxUUAtxnFvYmEmgI0wYXUXcCCSpeEVpXlsRhBnCEATxWylL9+EKCAYhe1NGstUa6356kS9NVvt3DU2fd+Wtbm/+lSbylJqsqkSm9CRhvoJVlvKPvF1RKY/FcPn5j4UfIMLn8D4UYb54BNsilTDXKnF4CfTobA0FpoW/LSp306wkXM+XaOJhZaFkcNM82ASNAWMrhrUbRfmyeI1FvRBTpN06WKxa9BK0o2E4Pd3zfBBEwPsv9sQBnmLVbLEIZ/Xe9LYwJu/Er17W6HYVBc7vmuk0xUQ+pqxdom5Fnp55SiytXLPYoMXNM4u4SNSCFWnrVIzKG3EGyMXo6n/BQOe+bX3FClY4PwydVhthOZ9NnS+ntiLh0fxtlUJHAuGaFoVmttpVMeum0p3WEXbcll94l1wM/gZ0Ccczop77VvN2I7TlsZCsuXf1WHvWEhjO8DPtyOVg2/mvK9QqboEth+7pD6NUQC1HN/TwvydGBARi9MZSzLE4b8Ru3XhX2PBxf8E1er2A6516o0w4sIA+lwURhAON82Kwe2iDAC1Watq4XHaGQ7skLcFOtI5lDxuM2gZe6WFIotPAhbaeYlU4to5cuarF1QrcZ/lwrLaCJl66JBocYZnrNlvm2+MBCTmUymPrYZVbjdlr/BxlMjmNmNI3SAAAAAElFTkSuQmCC) center center no-repeat;cursor:grab}.general[_ngcontent-%COMP%]{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAIlJREFUOE9jZKAyYKSyeQxgA7Xa/pv/+8/gSYnhzIwMq65WMV5jVJn0n531G8Mxhv8MRpQYyMDAcOszO4MBo0b7fwdGBob9//8xNDIwMRwgy9B/DA6MTAz1/xkYHFEMvFHN2ECOgRqt/xtGDYREymgYEp2ChnCyoUrWo3rhQPXii+ioJFIh1UtsAJK4mqGHZK9YAAAAAElFTkSuQmCC) center center no-repeat;cursor:grab}.html[_ngcontent-%COMP%]{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAZpJREFUOE/F1D1Lw1AYBeBzxEXcHPRaKjg6ibtDEcTNrVbcdFURBDvZxJKkIIJLEZwUFERoEdwdBPUP6KCzLr1VhG46aF5JbUJsm35AwYzJvQ/nPTcJ0eOLPfbwv6AyZRd9ONVZPkZN1nHCmCHTLnDnAlOvNu+7AlVGsiAS2uaMv1GZkoaLtHY4rAy5BnGrLZr1cEPCGrYDIqUtFv0No4ZcCvChbS4pUxYgKIDY1xa3wugfMAqLb8rA1yDKAmyWHR55QAg91BZXfTQAozBv4UhGZklc0cV4KcfnUA2/SQUn2uGyd78KtsKqzw3xukpqm5P1nQVJgYK2ueiDXmfeQfzpLUhiyA0ED9rheguwqG2mwiPvgUjXo/GsDH19451EsmTxIgyG0lWxYOQgSUYOQKyF0RFT5umi+NkPVcmy0tAfEGANYK3PYxArPqpMyYtgomxzrh3WFKwdwrl3Ft6LrQx5InBWsumEOr0G8OaPGfke1hce25Yxtw8vdJEo5XjTyZ+p7besMpLXDjc6wSJH7nRzs3VtE3aL9xz8Abf1vRWPrKqXAAAAAElFTkSuQmCC) center center no-repeat;cursor:grab}.condition[_ngcontent-%COMP%]{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAALdJREFUOE+11NERgyAMANBkCxbTabwWPadpF2OL9EBBLZBERX7h3iUhCULjgxrPvKjz79yEX+m9CAaM4BMghF5CWTBhBOMKviW0Cu4xN6P1oBnIAgKLFsESFmsnoRnIYRr0AO4w62Zc6lY5tUgTeAbjIg2gJk1tpM+AV6Ms1bH2KWPsPW2q8d2zbZN+L84vQdY+ZiA/KX5iinOtGb2EStiyP7jm3SK9vxyy9FusrwPaasFKG/r//gdxhLQV5onRWwAAAABJRU5ErkJggg==) center center no-repeat;cursor:grab}.lf-html-wrapper[_ngcontent-%COMP%]{width:100px;height:100px;box-sizing:border-box;background:#68fce2;border:2px solid #838382;border-radius:10px}.lf-html-wrapper[_ngcontent-%COMP%]   .custom-html[_ngcontent-%COMP%]{width:96px;height:96px;border:2px solid #2987ff}.lf-html-wrapper[_ngcontent-%COMP%]   .custom-head[_ngcontent-%COMP%]{color:red;height:26px;line-height:26px}.lf-html-wrapper[_ngcontent-%COMP%]   .custom-body[_ngcontent-%COMP%]{color:#2987ff;height:50px;line-height:50px}"]}),s})();const de=["custom"],ae=[{path:"",component:(()=>{class s{constructor(o,t){this.router=o,this.drawerService=t,this.lf=null,this.drawer=!1,this.currentNode=null}ngOnInit(){u().use(m.EV),u().use(m.t0),u().use(m.aC),u().use(m.oT),u().use(m.v2),u().use(m.Ju),this.lf=new(u())({container:this.customDom.nativeElement,grid:!0,height:670}),this.lf.render();const{eventCenter:o}=this.lf.graphModel;this.bindEvent(o)}bindEvent(o){o.on("node:click",t=>{console.log("\u8282\u70b9\u5355\u51fb",t),this.drawer=!0,this.currentNode=t,"approve"===this.currentNode.data.type?this.openApproveEditDrawer():"copy"===this.currentNode.data.type&&this.openCopyEditDrawer()})}openApproveEditDrawer(){this.drawerService.create({nzTitle:"\u5ba1\u6279\u8282\u70b9\u7f16\u8f91",nzWidth:700,nzContent:O,nzContentParams:{node:this.currentNode}}).afterClose.subscribe(t=>{null!=t&&this.lf.setProperties(this.currentNode.data.id,{approve_user_id_list:t.approve_user_id_list,approve_type:t.approve_type})})}openCopyEditDrawer(){this.drawerService.create({nzTitle:"\u6284\u9001\u8282\u70b9\u7f16\u8f91",nzWidth:700,nzContent:S,nzContentParams:{node:this.currentNode}}).afterClose.subscribe(t=>{null!=t&&this.lf.setProperties(this.currentNode.data.id,{copy_user_id_list:t.copy_user_id_list,copy_type:t.copy_type})})}}return s.\u0275fac=function(o){return new(o||s)(e.Y36(_.F0),e.Y36(C.ai))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-custom"]],viewQuery:function(o,t){if(1&o&&e.Gf(de,7),2&o){let r;e.iGM(r=e.CRH())&&(t.customDom=r.first)}},decls:7,vars:2,consts:[["nz-row",""],[1,"flowCanvas"],[1,"container"],["custom",""],["ng-if","lf",3,"lf"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"div",2,3)(4,"app-custom-node-panel",4)(5,"app-bpnm-data-panel",4),e.qZA()(),e._UZ(6,"br")),2&o&&(e.xp6(4),e.Q6J("lf",t.lf),e.xp6(1),e.Q6J("lf",t.lf))},dependencies:[R.N,g.SK,le],styles:[".flowCanvas[_ngcontent-%COMP%]{position:relative;width:100%;margin:0;display:flex}.flowCanvas[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;flex-grow:1;border:0px solid #ababab;overflow:hidden}.text[_ngcontent-%COMP%]{margin:0 20px;font-size:weight;cursor:pointer}"]}),s})()}];let pe=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[f.ez,_.Bz.forChild(ae),_.Bz]}),s})();var ce=l(4466);let ue=(()=>{class s{}return s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[ce.m,pe,g.Jb,y.sL,C.BL,c.U5,A.LV,v.o7,i.u5,z.PV,i.UX]}),s})()}}]);